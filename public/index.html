<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>OnlyCats</title>

<!-- Styles -->
<link rel="stylesheet" href="./css/styles.css">

<!-- SAFETY: minimal inline CSS in case styles.css fails to load -->
<style>
  /* Keep overlays hidden by default; show only when .active is added */
  .modal-overlay { display: none; }
  .modal-overlay.active { display: flex; }
  /* Guest screen is JS-controlled; default to hidden to avoid flashing */
  #guest-login-screen { display: none; }
</style>

</head>
<body>
<header class="header">
  <div class="header-content">
    <a class="header-logo" href="#" id="home-link">OnlyCats</a>
    <input class="search-bar" placeholder="Search" type="text"/>
    <div class="nav-icons">
      <a href="#" id="home-btn">Home</a>
      <a href="#" id="profile-btn">Profile</a>
      <a href="#" id="create-post-btn">Create</a>
        <div class="profile-dropdown-container">
          <a href="#" id="profile-pic-btn"><img src="" alt="Profile" class="profile-pic" id="header-profile-pic"/></a>
          <div id="profile-dropdown-menu" class="dropdown-menu">
            <a href="#" id="my-profile-link">Profile</a>
            <a href="#">Settings</a>
            <a href="#" id="logout-link">Log out</a>
          </div>
        </div>
    </div>
  </div>
</header>

<main class="main-container">
  <div class="feed-container">
    <div id="content-area"></div>
  </div>
  <div class="right-sidebar">
    <div class="current-user-card" id="current-user-card">
      <!-- filled by initSidebarCurrentUser -->
    </div>
  </div>
</main>

<!-- Create Post Modal -->
<div id="create-post-modal" class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Create a new post</h2>
      <span class="close-modal" id="close-modal-btn">&times;</span>
    </div>
    <form id="create-post-form" class="modal-form">
      <div class="post-type-buttons">
        <button type="button" data-type="post" class="active">Post (Image + Text)</button>
        <button type="button" data-type="text-only">Text Only</button>
      </div>
      <div class="modal-form-group" id="image-input-group">
        <label for="post-image-url">Image URL</label>
        <input type="text" id="post-image-url" placeholder="Paste an image URL here..."/>
      </div>
      <div class="modal-form-group" id="text-input-group" style="display:none;">
        <label for="post-text">Text content</label>
        <input type="text" id="post-text" placeholder="Write something..."/>
      </div>
      <div class="modal-form-group">
        <label for="post-caption">Caption</label>
        <textarea id="post-caption" placeholder="Write a caption..."></textarea>
      </div>
      <div class="modal-actions">
        <button id="cancel-post" type="button">Cancel</button>
        <button id="submit-post" type="submit">Share</button>
      </div>
    </form>
  </div>
</div>

<!-- Login Modal -->
<div id="login-modal" class="modal-overlay" aria-hidden="true">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Sign in</h2>
      <span class="close-modal" id="close-login-modal">&times;</span>
    </div>

    <!-- Inline error box -->
    <div id="login-error" class="form-error" role="alert" aria-live="polite" style="display:none;"></div>

    <form id="login-form" class="modal-form">
      <div class="modal-form-group">
        <label for="login-email">Email</label>
        <input id="login-email" type="email" placeholder="you@example.com" />
      </div>
      <div class="modal-form-group">
        <label for="login-password">Password</label>
        <input id="login-password" type="password" placeholder="••••••••" />
      </div>
      <div class="modal-actions">
        <button id="login-cancel" type="button">Cancel</button>
        <button id="login-submit" type="submit">Sign in</button>
      </div>
    </form>
  </div>
</div>


<!-- Guest “Welcome / Sign in” Screen -->
<div id="guest-login-screen" class="guest-gate" style="display:none;">
  <div id="guest-login-card">
    <h1>Welcome to OnlyCats</h1>
    <p>Sign in to see the feed.</p>
    <button id="guest-open-login">Sign in</button>
  </div>
</div>

<!-- Likers Modal -->
<div id="likers-modal" class="modal-overlay" aria-hidden="true">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Liked by</h2>
      <span class="close-modal" id="close-likers-modal">&times;</span>
    </div>
    <div id="likers-list" class="likers-list"></div>
  </div>
</div>

<script type="module" src="./js/main.js"></script>
</body>
</html>
